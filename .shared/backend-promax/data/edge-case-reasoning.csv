Problem,Scenario,Root_Cause,Solution,Senior_Logic,Trade_off
Race Condition,Bank Transfer / Inventory Update,Concurrent DB writes updating the same row.,Optimistic Locking (Versioning) or Pessimistic Locking.,Use `WHERE version = current_version`; retry on failure.,Performance vs Data Integrity
Distributed Inconsistency,Updating DB and sending Email/Message.,DB succeeds but Message queue fails (or vice versa).,Transactional Outbox Pattern.,Save event to a local DB table in the same transaction as state.,Complexity vs Reliability
Double Payment,User clicks "Pay" twice rapidly.,Non-idempotent API endpoint.,Idempotency Key (UUID).,Store key in Redis/DB with 24h TTL; return same response if key exists.,Storage vs Safety
Ghost Writes,Distributed cache stale after DB update.,Cache update fails after DB committed.,Cache-Aside + TTL + Delete on update.,Always DELETE cache on DB update; let it lazy-load again.,Latency vs Freshness
Zombie Services,Microservice A thinks B is up; B is actually overloaded.,Downstream service latency causing upstream thread exhaustion.,Circuit Breaker (Netflix Hystrix / Resilience4j).,Open circuit at 50% failure rate; provide fallback response.,Partial Outage vs Total Collapse
Data Drift,NoSQL replica lagging behind leader.,Asynchronous replication.,Read-Your-Writes consistency logic.,Route subsequent reads from same user to the Leader node if fresh data is needed.,Latency vs Consistency
Deadlocks,Transactional updates to multiple tables in different orders.,Cyclic dependency between transactions.,Consistent Resource Ordering.,Always update Table A before Table B across all services.,Dev discipline vs Flexibility
Memory Leak,Large file upload processing in Node.js.,Buffering entire file into RAM.,Streaming API (Streams/Buffers).,Pipe input stream directly to storage (S3); never hold in RAM.,Complexity vs Stability
Clock Skew,Distributed logging / Event ordering.,System clocks on different servers differ by ms.,Vector Clocks / Hybrid Logical Clocks.,Use Lamport timestamps for causal ordering when ms matter.,Complexity vs Precise Ordering
Thundering Herd,Cache expires for a popular product.,Massive concurrent requests hit DB at once.,Cache Warming / Mutex Locking (SingleFlight).,Only one request goes to DB; others wait for the first to fill cache.,Internal Latency vs DB Load
Partial Failure,One step of 5 in a checkout flow fails.,Lack of distributed transaction management.,Saga Pattern (Choreography/Orchestration).,Implement Compensating Transactions (rollback logic) for each step.,Complexity vs Data Integrity
Service Discovery Failure,API Gateway cannot find Service B.,DNS lag or Registry (Consul/K8s) failure.,Client-side Load Balancing + Local Caching.,Cache last known healthy IPs of service B locally for 30s.,Availability vs Up-to-date Routing
Dirty Reads,Reading data from an uncommitted transaction.,Insufficient Transaction Isolation Level.,Use REPEATABLE READ or SERIALIZABLE (if HFT).,Sacrifice some performance for absolute data correctness.,Performance vs Correctness
Connection Pool Exhaustion,Sudden surge in traffic.,Fixed pool size is too small; or slow queries holding connections.,Query Optimization + Adaptive Capping.,Optimize SQL; reject extra requests with 429 rather than hanging.,Revenue vs Stability
Sensitive Data Leak in Logs,Debug mode left on in production.,Logging `req.body` directly.,Log Sanitization Middleware.,Blacklist sensitive fields (password; credit_card) from all log output.,Observability vs Privacy
